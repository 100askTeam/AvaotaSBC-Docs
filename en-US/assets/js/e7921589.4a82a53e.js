"use strict";(self.webpackChunkavaota_docs=self.webpackChunkavaota_docs||[]).push([[1590],{43522:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>p,contentTitle:()=>c,default:()=>t,frontMatter:()=>s,metadata:()=>d,toc:()=>_});var l=e(85893),r=e(11151);const s={},c="GPIO \u9a71\u52a8",d={id:"linux-manual/syterkit/driver/gpio",title:"GPIO \u9a71\u52a8",description:"\u7ed3\u6784\u4f53",source:"@site/docs/linux-manual/syterkit/driver/gpio.md",sourceDirName:"linux-manual/syterkit/driver",slug:"/linux-manual/syterkit/driver/gpio",permalink:"/en-US/linux-manual/syterkit/driver/gpio",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"linuxManualSidebar",previous:{title:"CLK \u9a71\u52a8",permalink:"/en-US/linux-manual/syterkit/driver/clk"},next:{title:"I2C \u9a71\u52a8",permalink:"/en-US/linux-manual/syterkit/driver/i2c"}},p={},_=[{value:"\u7ed3\u6784\u4f53",id:"\u7ed3\u6784\u4f53",level:2},{value:"\u9a71\u52a8 API",id:"\u9a71\u52a8-api",level:2},{value:"sunxi_gpio_init",id:"sunxi_gpio_init",level:3},{value:"sunxi_gpio_set_value",id:"sunxi_gpio_set_value",level:3},{value:"sunxi_gpio_read",id:"sunxi_gpio_read",level:3},{value:"sunxi_gpio_set_pull",id:"sunxi_gpio_set_pull",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"\u58f0\u660e\u4e00\u4e2aGPIO\uff0c\u62c9\u9ad8\u6216\u62c9\u4f4e",id:"\u58f0\u660e\u4e00\u4e2agpio\u62c9\u9ad8\u6216\u62c9\u4f4e",level:3},{value:"\u58f0\u660e\u4e00\u4e2a GPIO\uff0c\u5e76\u4e14\u914d\u7f6e MUX",id:"\u58f0\u660e\u4e00\u4e2a-gpio\u5e76\u4e14\u914d\u7f6e-mux",level:3}];function u(n){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.h1,{id:"gpio-\u9a71\u52a8",children:"GPIO \u9a71\u52a8"}),"\n",(0,l.jsx)(i.h2,{id:"\u7ed3\u6784\u4f53",children:"\u7ed3\u6784\u4f53"}),"\n",(0,l.jsx)(i.p,{children:"GPIO MUX \u679a\u4e3e"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"enum {\r\n    GPIO_INPUT = 0,\r\n    GPIO_OUTPUT = 1,\r\n    GPIO_PERIPH_MUX2 = 2,\r\n    GPIO_PERIPH_MUX3 = 3,\r\n    GPIO_PERIPH_MUX4 = 4,\r\n    GPIO_PERIPH_MUX5 = 5,\r\n    GPIO_PERIPH_MUX6 = 6,\r\n    GPIO_PERIPH_MUX7 = 7,\r\n    GPIO_PERIPH_MUX8 = 8,\r\n    GPIO_PERIPH_MUX14 = 14,\r\n    GPIO_DISABLED = 0xf,\r\n};\n"})}),"\n",(0,l.jsx)(i.p,{children:"GPIO \u7aef\u53e3\u679a\u4e3e"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"enum {\r\n    GPIO_PORTA = 0,\r\n    GPIO_PORTB,\r\n    GPIO_PORTC,\r\n    GPIO_PORTD,\r\n    GPIO_PORTE,\r\n    GPIO_PORTF,\r\n    GPIO_PORTG,\r\n    GPIO_PORTH,\r\n    GPIO_PORTI,\r\n    GPIO_PORTJ,\r\n    GPIO_PORTK,\r\n    GPIO_PORTL,\r\n    GPIO_PORTM,\r\n    GPIO_PORTN,\r\n};\n"})}),"\n",(0,l.jsx)(i.p,{children:"GPIO \u4e0a\u4e0b\u62c9\u72b6\u6001"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"enum gpio_pull_t {\r\n    GPIO_PULL_UP = 0,\r\n    GPIO_PULL_DOWN = 1,\r\n    GPIO_PULL_NONE = 2,\r\n};\n"})}),"\n",(0,l.jsx)(i.p,{children:"GPIO \u5f15\u811a\u5b9a\u4e49"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"#define GPIO_PIN(x, y) (((uint32_t) (x << PIO_NUM_IO_BITS)) | y)\r\n\r\ntypedef struct {\r\n    gpio_t pin;\r\n    uint8_t mux;\r\n} gpio_mux_t;\n"})}),"\n",(0,l.jsx)(i.h2,{id:"\u9a71\u52a8-api",children:"\u9a71\u52a8 API"}),"\n",(0,l.jsx)(i.h3,{id:"sunxi_gpio_init",children:"sunxi_gpio_init"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"void sunxi_gpio_init(gpio_t pin, int cfg);\n"})}),"\n",(0,l.jsx)(i.p,{children:"\u521d\u59cb\u5316\u5177\u6709\u7ed9\u5b9a\u914d\u7f6e\u7684\u6307\u5b9aGPIO\u5f15\u811a\u3002"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"pin"}),"\uff1a\u8981\u521d\u59cb\u5316\u7684GPIO\u5f15\u811a\u3002"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"cfg"}),"\uff1aGPIO\u5f15\u811a\u7684\u914d\u7f6e\u503c\u3002"]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"sunxi_gpio_set_value",children:"sunxi_gpio_set_value"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"void sunxi_gpio_set_value(gpio_t pin, int value);\n"})}),"\n",(0,l.jsx)(i.p,{children:"\u8bbe\u7f6e\u6307\u5b9aGPIO\u5f15\u811a\u7684\u503c\u3002"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"pin"}),"\uff1a\u8981\u8bbe\u7f6e\u503c\u7684GPIO\u5f15\u811a\u3002"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"value"}),"\uff1a\u8981\u8bbe\u7f6e\u7684GPIO\u5f15\u811a\u7684\u503c\uff080\u62161\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"sunxi_gpio_read",children:"sunxi_gpio_read"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"int sunxi_gpio_read(gpio_t pin);\n"})}),"\n",(0,l.jsx)(i.p,{children:"\u8bfb\u53d6\u6307\u5b9aGPIO\u5f15\u811a\u7684\u503c\u3002"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"pin"}),"\uff1a\u8981\u8bfb\u53d6\u503c\u7684GPIO\u5f15\u811a\u3002"]}),"\n",(0,l.jsx)(i.li,{children:"\u8fd4\u56de\u503c\uff1a\u4eceGPIO\u5f15\u811a\u8bfb\u53d6\u7684\u503c\uff080\u62161\uff09\u3002"}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"sunxi_gpio_set_pull",children:"sunxi_gpio_set_pull"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"void sunxi_gpio_set_pull(gpio_t pin, enum gpio_pull_t pull);\n"})}),"\n",(0,l.jsx)(i.p,{children:"\u8bbe\u7f6e\u6307\u5b9aGPIO\u5f15\u811a\u7684\u62c9\u7535\u963b\u914d\u7f6e\u3002"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"pin"}),"\uff1a\u8981\u8bbe\u7f6e\u62c9\u7535\u963b\u914d\u7f6e\u7684GPIO\u5f15\u811a\u3002"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"pull"}),"\uff1a\u8981\u4e3aGPIO\u5f15\u811a\u8bbe\u7f6e\u7684\u62c9\u7535\u963b\u914d\u7f6e\u3002"]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,l.jsx)(i.h3,{id:"\u58f0\u660e\u4e00\u4e2agpio\u62c9\u9ad8\u6216\u62c9\u4f4e",children:"\u58f0\u660e\u4e00\u4e2aGPIO\uff0c\u62c9\u9ad8\u6216\u62c9\u4f4e"}),"\n",(0,l.jsx)(i.p,{children:"\u58f0\u660e\u4e00\u4e2aGPIO\uff0c\u8bbe\u7f6e\u4e3a\u8f93\u51fa\u6a21\u5f0f"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"static gpio_mux_t pl13_pins = {\r\n        .pin = GPIO_PIN(GPIO_PORTL, 13),\r\n        .mux = GPIO_OUTPUT,\r\n};\n"})}),"\n",(0,l.jsx)(i.p,{children:"\u62c9\u9ad8 GPIO"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"sunxi_gpio_init(pl13_pins.pin, pl13_pins.mux);\r\nsunxi_gpio_set_value(pl13_pins.pin, 1);\n"})}),"\n",(0,l.jsx)(i.p,{children:"\u62c9\u4f4e GPIO"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:"sunxi_gpio_init(pl13_pins.pin, pl13_pins.mux);\r\nsunxi_gpio_set_value(pl13_pins.pin, 0);\n"})}),"\n",(0,l.jsx)(i.h3,{id:"\u58f0\u660e\u4e00\u4e2a-gpio\u5e76\u4e14\u914d\u7f6e-mux",children:"\u58f0\u660e\u4e00\u4e2a GPIO\uff0c\u5e76\u4e14\u914d\u7f6e MUX"}),"\n",(0,l.jsx)(i.p,{children:"\u8bbe\u7f6e GPIO MUX\uff0c\u5047\u8bbe\u8bbe\u7f6e MUX \u4e3a 2\uff0c\u5148\u58f0\u660e GPIO"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-c",children:"static gpio_mux_t pl13_pins = {\r\n        .pin = GPIO_PIN(GPIO_PORTL, 13),\r\n        .mux = GPIO_PERIPH_MUX2,\r\n};\n"})}),"\n",(0,l.jsx)(i.p,{children:"\u7136\u540e\u521d\u59cb\u5316 GPIO"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:"sunxi_gpio_init(pl13_pins.pin, pl13_pins.mux);\n"})}),"\n",(0,l.jsx)(i.p,{children:"\u5373\u53ef\u5bf9\u63a5\u5230\u5176\u4ed6\u5916\u8bbe\u4f7f\u7528"})]})}function t(n={}){const{wrapper:i}={...(0,r.a)(),...n.components};return i?(0,l.jsx)(i,{...n,children:(0,l.jsx)(u,{...n})}):u(n)}},11151:(n,i,e)=>{e.d(i,{Z:()=>d,a:()=>c});var l=e(67294);const r={},s=l.createContext(r);function c(n){const i=l.useContext(s);return l.useMemo((function(){return"function"==typeof n?n(i):{...i,...n}}),[i,n])}function d(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),l.createElement(s.Provider,{value:i},n.children)}}}]);