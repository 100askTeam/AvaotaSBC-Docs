<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-linux-manual/amp-docs/hal/ir" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">IR - 红外 | Avaota SBC</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="http://avaotasbc.100ask.net/en-US/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="http://avaotasbc.100ask.net/en-US/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="http://avaotasbc.100ask.net/en-US/linux-manual/amp-docs/hal/ir"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en-US"><meta data-rh="true" name="docsearch:language" content="en-US"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="IR - 红外 | Avaota SBC"><meta data-rh="true" name="description" content="红外是一种电磁波，可以实现数据的无线传输，由发送和接收两个部分组成。发送端对红外信号进行脉冲编码，接收端完成对红外信号的脉冲解码。红外遥控协议有多种，如 NEC、SIRC、 RC-5 等，这些协议都比较简单，基本都是以脉冲宽度或脉冲间隔来编码。当遥控器按下按键时，遥控器逻辑单元会产生一个完整的脉冲波形，包含遥控指令的信息，即红外传输的基带信号。这个波形被送到遥控器的调制单元，经调制单元调制成高频红外电磁波信号，由发光二极管发射出去，如下图所示。"><meta data-rh="true" property="og:description" content="红外是一种电磁波，可以实现数据的无线传输，由发送和接收两个部分组成。发送端对红外信号进行脉冲编码，接收端完成对红外信号的脉冲解码。红外遥控协议有多种，如 NEC、SIRC、 RC-5 等，这些协议都比较简单，基本都是以脉冲宽度或脉冲间隔来编码。当遥控器按下按键时，遥控器逻辑单元会产生一个完整的脉冲波形，包含遥控指令的信息，即红外传输的基带信号。这个波形被送到遥控器的调制单元，经调制单元调制成高频红外电磁波信号，由发光二极管发射出去，如下图所示。"><link data-rh="true" rel="icon" href="/en-US/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://avaotasbc.100ask.net/en-US/linux-manual/amp-docs/hal/ir"><link data-rh="true" rel="alternate" href="http://avaotasbc.100ask.net/linux-manual/amp-docs/hal/ir" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="http://avaotasbc.100ask.net/en-US/linux-manual/amp-docs/hal/ir" hreflang="en-US"><link data-rh="true" rel="alternate" href="http://avaotasbc.100ask.net/linux-manual/amp-docs/hal/ir" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://48O7DQDPJM-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Avaota SBC" href="/en-US/opensearch.xml"><link rel="stylesheet" href="/en-US/assets/css/styles.6d12b8bf.css">
<script src="/en-US/assets/js/runtime~main.31c83e3a.js" defer="defer"></script>
<script src="/en-US/assets/js/main.25b85068.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to Main Content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to Main Content</a></div><nav aria-label="Main Navigation" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en-US/"><div class="navbar__logo"><img src="/en-US/img/logo.png" alt="Avaota SBC" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en-US/img/logo.png" alt="Avaota SBC" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Avaota SBC</b></a><a class="navbar__item navbar__link" href="/en-US/avaota-sbc/">Avaota SBC</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en-US/linux-manual/intro">Avaota OS</a><a class="navbar__item navbar__link" href="/en-US/android/">Android</a><a class="navbar__item navbar__link" href="/en-US/community-docs/">Avaota Community</a><a class="navbar__item navbar__link" href="/en-US/buildroot/index">Buildroot</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/en-US/linux-manual/amp-docs/hal/ir"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/linux-manual/amp-docs/hal/ir" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li><li><a href="/en-US/linux-manual/amp-docs/hal/ir" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://crowdin.com/project/docsavaotafun" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate</a></li></ul></div><a href="https://github.com/AvaotaSBC" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently Light mode)" aria-label="Switch between dark and light mode (currently Light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Getting Back to the Top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Document Sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en-US/linux-manual/intro">Avaota OS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en-US/category/avaota-os-使用入门">Get started with Avaota OS</a><button aria-label="Collapse sidebar category &#x27;Get started with Avaota OS&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/avaotaos/os-flash">Avaota OS 固件烧录</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/avaotaos/os-start">系统启动常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/avaotaos/ssh">使用 SSH 连接开发板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/avaotaos/uart">使用 UART 连接开发板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/avaotaos/hdmi">使用 HDMI 连接开发板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/avaotaos/wifi">连接 WIFI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/avaotaos/apt-source">更换软件源</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/avaotaos/avaota-dpkg">软件包管理</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en-US/category/avaota-os-开发入门">Beginning of Avaota OS Development</a><button aria-label="Collapse sidebar category &#x27;Beginning of Avaota OS Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/develop-intro/helloworld">编写 Hello World</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/develop-intro/lnmp">部署 LNMP 服务</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/develop-intro/bt-panel">部署 宝塔面板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/develop-intro/docker">部署 Docker 服务</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/develop-intro/kode-nas">部署 可道云搭建简易 NAS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/develop-intro/mc-server">部署 Minecraft 服务器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/develop-intro/ncnn">部署 ncnn</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en-US/category/外设驱动教程">External Drive Tutorial</a><button aria-label="Collapse sidebar category &#x27;External Drive Tutorial&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/peripheral-driver/eeprom">EEPROM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/peripheral-driver/ledc">WS2812 RGB LED</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/peripheral-driver/lvgl">SPI 屏幕驱动 LVGL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/peripheral-driver/rtc-chip">外部 RTC 时钟</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/peripheral-driver/spi-lcd">SPI LCD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/peripheral-driver/spi-nor">SPI NOR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/peripheral-driver/usb-cam">OpenCV 驱动 USB 摄像头</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en-US/category/avaota-os-开发进阶">Avaota OS Developments</a><button aria-label="Collapse sidebar category &#x27;Avaota OS Developments&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en-US/category/自行构建-avaota-os">Build Avaota OS on your own</a><button aria-label="Collapse sidebar category &#x27;Build Avaota OS on your own&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/prepare-env/prepare-env">搭建开发环境</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/prepare-env/get-sdk">获取 SDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/prepare-env/build-os">编译 AvaotaOS</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en-US/category/avaota-os-内核开发">Avaota OS kernel development</a><button aria-label="Collapse sidebar category &#x27;Avaota OS kernel development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/kernel-dev/get-kernel">获取内核源码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/kernel-dev/build-kernel">配置编译内核</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en-US/category/bsp-驱动手册">BSP Drivers Manual</a><button aria-label="Collapse sidebar category &#x27;BSP Drivers Manual&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/bsp-intro">BSP 驱动介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/ccu">CCU - 时钟管理模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/ce">Crypto Engine - 算法引擎</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/gmac">EMAC - 以太网络</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/gpio">GPIO - Pinctrl 子系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/hwspinlock">HWSPINLOCK - 硬件自旋锁</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/ir-rx">IR RX - 红外接收</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/ir-tx">IR TX - 红外发射</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/ledc">LEDC - 发光二极管控制器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/mipi-csi">MIPI CSI - 视频输入</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/pcie">PCIe - PCI Express</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/pwm">PWM - 脉冲宽度调制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/rtc">RTC - 实时时钟</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/sid">Security ID - 芯片ID</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/spi">SPI - 同步串行外设接口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/timer">Timer - 定时器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/twi">TWI - Two Wire Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/sdk-develop/bsp-driver/uart">UART - 通用异步收发传输器</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en-US/category/syterkit-开发">SyterKit Development</a><button aria-label="Collapse sidebar category &#x27;SyterKit Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/syterkit-intro">SyterKit 入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/syterkit-apps">SyterKit 板级应用</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en-US/category/syterkit-api">SyterKit API</a><button aria-label="Collapse sidebar category &#x27;SyterKit API&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/devel/libc">libc 基础类库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/devel/log">log 基础库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/devel/os">Timer 调度器</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en-US/category/syterkit-驱动">SyterKit Driver</a><button aria-label="Collapse sidebar category &#x27;SyterKit Driver&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/driver/clk">CLK 驱动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/driver/gpio">GPIO 驱动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/driver/i2c">I2C 驱动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/driver/pmu">PMU 驱动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/driver/spi">SPI 驱动</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/syterkit/driver/uart">UART 驱动</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/en-US/category/amp-异构计算">AMP isomers calculation</a><button aria-label="Collapse sidebar category &#x27;AMP isomers calculation&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en-US/category/amp-异构开发">AMP isomer development</a><button aria-label="Collapse sidebar category &#x27;AMP isomer development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/intro/amp-intro">异构计算简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/intro/amp-soft">AMP 软件框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/intro/amp-res">异构计算资源划分</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/en-US/category/rtos-hal-模块驱动">RTOS HAL Module Driver</a><button aria-label="Collapse sidebar category &#x27;RTOS HAL Module Driver&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/ccu">CCU - 时钟管理模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/dmac">DMAC - DMA 控制器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/gpadc">GPADC - 模数转换模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/gpio">GPIO - 通用IO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/ir">IR - 红外</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/ledc">LEDC - RGB LED</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/msgbox">MSGBOX - 异构通讯</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/pwm">PWM - 脉冲宽度调制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/rtc">RTC - 实时时钟</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/sid">SID - 唯一码模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/smartcard">SCR - 智能卡读取器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/spi">SPI - 同步串行接口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/spin">HW Spinlock - 硬件同步锁</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/twi">TWI - 双总线协议</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/amp-docs/hal/uart">UART - 通用异步收发传输器</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en-US/category/npu-开发">NPU Development</a><button aria-label="Collapse sidebar category &#x27;NPU Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/npu/npu-intro">NPU 开发介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/npu/prepare-env">准备 NPU 开发环境</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en-US/linux-manual/npu/convert-model">NPU 模型转换与部署</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Page Path"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Main Page" class="breadcrumbs__link" href="/en-US/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en-US/category/amp-异构计算"><span itemprop="name">AMP isomers calculation</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en-US/category/rtos-hal-模块驱动"><span itemprop="name">RTOS HAL Module Driver</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">IR - 红外</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Overview of this page</button></div><div class="theme-doc-markdown markdown"><h1>IR - 红外</h1>
<p>红外是一种电磁波，可以实现数据的无线传输，由发送和接收两个部分组成。发送端对红外信号进行脉冲编码，接收端完成对红外信号的脉冲解码。红外遥控协议有多种，如 NEC、SIRC、 RC-5 等，这些协议都比较简单，基本都是以脉冲宽度或脉冲间隔来编码。当遥控器按下按键时，遥控器逻辑单元会产生一个完整的脉冲波形，包含遥控指令的信息，即红外传输的基带信号。这个波形被送到遥控器的调制单元，经调制单元调制成高频红外电磁波信号，由发光二极管发射出去，如下图所示。</p>
<p><img decoding="async" loading="lazy" alt="image-20230317132437520" src="data:image/png;base64,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" width="215" height="146" class="img_ev3q"></p>
<p>红外电磁波信号一般使用一体化接收头接收，同时完成信号的解调和放大，其输出信号就是红外的基带脉冲信号。解调后的信号可直接送入信号处理单元，由处理单元对脉冲波形进行解码，典型红外接收电路如下图所示。</p>
<p><img decoding="async" loading="lazy" alt="image-20230317132458778" src="data:image/png;base64,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" width="307" height="146" class="img_ev3q"></p>
<p>相对应的，IR RX 模块属于INPUT 输入设备，支持红外遥控器的按键遥控。具体规格如下所示：</p>
<p><img decoding="async" loading="lazy" alt="image-20230315182608167" src="/en-US/assets/images/image-20230315182608167-19c190112c6e2ccc4fa01429275fdd30.png" width="421" height="395" class="img_ev3q"></p>
<p>整个系统框架流程如上图所示：当用户按下遥控器的时候，会触发一个中断。IR 驱动会进入中断，然后解析遥控器发送的键值，然后对该电压值进行解码，然后将该事件上报给INPUT 子系统。INPUT 子系统找到相应的事件处理程序之后，会将该按键事件上报给用户空间，等待用户程序对该按键信息的读取与处理。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ir-tx-发送-cir_tx">IR TX 发送 （CIR_TX）<a class="hash-link" aria-label="Direct link to IR TX 发送 （CIR_TX）" title="Direct link to IR TX 发送 （CIR_TX）" href="/en-US/linux-manual/amp-docs/hal/ir#ir-tx-发送-cir_tx">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块内部调制原理">模块内部调制原理<a class="hash-link" aria-label="Direct link to 模块内部调制原理" title="Direct link to 模块内部调制原理" href="/en-US/linux-manual/amp-docs/hal/ir#模块内部调制原理">​</a></h3>
<p>内部调制原理如下图所示。其中 IMS（Internal Modulation Select），为选择使用内部调制或不调制。软件需设置使用IMS。</p>
<p><img decoding="async" loading="lazy" alt="image-20230317132913250" src="/en-US/assets/images/image-20230317132913250-60de07577ff31752738e42382fe14374.png" width="467" height="189" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="载波频率设置">载波频率设置<a class="hash-link" aria-label="Direct link to 载波频率设置" title="Direct link to 载波频率设置" href="/en-US/linux-manual/amp-docs/hal/ir#载波频率设置">​</a></h3>
<p>载波频率计算公式为：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Fc = Fclk / [(RFMC + 1) * (DRMC + 2)] (公式1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中</p>
<ul>
<li>Fc为载波频率；</li>
<li>Fclk为Sunxi IR-TX时钟源，目前配置为12MHz；</li>
<li>RFMC为载波分频系数，由MCR寄存器（0x04）bit[7:0]设定；</li>
<li>DRMC为载波占空比设置，由GLR寄存器（0x00）bit[6:5]设定，可配置1/2、1/3或1/4。</li>
</ul>
<p>通常，载波占空比DRMC 和载波频率 Fc 由应用层设定，因此设置载波占空比即转换为设置GLR bit[6:5]，设置载波频率即转换成设置MCR bit[7:0]，由公式1 变换得计算RFMC 的公式为：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RFMC = Fclk / [Fc *(DRMC + 2)] - 1 (  公式2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数据发送流程">数据发送流程<a class="hash-link" aria-label="Direct link to 数据发送流程" title="Direct link to 数据发送流程" href="/en-US/linux-manual/amp-docs/hal/ir#数据发送流程">​</a></h3>
<p>CIR-TX 驱动数据发送流程如下图所示：</p>
<p><img decoding="async" loading="lazy" alt="image-20230317133141010" src="/en-US/assets/images/image-20230317133141010-65226a2bdc26b87d8d8d28c7cec0ef58.png" width="287" height="362" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置载波占空比">设置载波占空比<a class="hash-link" aria-label="Direct link to 设置载波占空比" title="Direct link to 设置载波占空比" href="/en-US/linux-manual/amp-docs/hal/ir#设置载波占空比">​</a></h3>
<p>由于硬件只支持1/4、1/3 和1/2 三挡占空比设置，因此Sunxi IR-TX 驱动设置载波占空比的流
程比较简单：上层传递一个0~100 的数值，如果该数值小于30，则设定占空比为1/4；如果该
数值大于30 且小于40，则设定占空比为1/3；如果该数值大于40，则设定占空比为1/2。最后
更新硬件配置。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置载波频率">设置载波频率<a class="hash-link" aria-label="Direct link to 设置载波频率" title="Direct link to 设置载波频率" href="/en-US/linux-manual/amp-docs/hal/ir#设置载波频率">​</a></h3>
<p>IR-TX 驱动设置载波频率流程如下图所示：</p>
<p><img decoding="async" loading="lazy" alt="image-20230317133218292" src="/en-US/assets/images/image-20230317133218292-40d51ba492c467961f8e751a549a1c1e.png" width="300" height="321" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块配置介绍">模块配置介绍<a class="hash-link" aria-label="Direct link to 模块配置介绍" title="Direct link to 模块配置介绍" href="/en-US/linux-manual/amp-docs/hal/ir#模块配置介绍">​</a></h3>
<p>IR_TX 在 <code>menuconfig </code> 中配置如下</p>
<p><img decoding="async" loading="lazy" alt="image-20230317132524780" src="data:image/png;base64,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" width="621" height="174" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块源码结构">模块源码结构<a class="hash-link" aria-label="Direct link to 模块源码结构" title="Direct link to 模块源码结构" href="/en-US/linux-manual/amp-docs/hal/ir#模块源码结构">​</a></h3>
<p>CIR_TX 模块源码结构如下所示：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rtos-hal/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|--hal/source/cir_tx/hal_cir_tx     // hal层接口代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|--include/hal/sunxi_hal_cir_tx.h   // 头文件</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块接口说明">模块接口说明<a class="hash-link" aria-label="Direct link to 模块接口说明" title="Direct link to 模块接口说明" href="/en-US/linux-manual/amp-docs/hal/ir#模块接口说明">​</a></h3>
<p>头文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;sunxi_hal_cir_tx.h&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="irtx-初始化">IRTX 初始化<a class="hash-link" aria-label="Direct link to IRTX 初始化" title="Direct link to IRTX 初始化" href="/en-US/linux-manual/amp-docs/hal/ir#irtx-初始化">​</a></h4>
<p>IRTX 模块初始化，主要完成clk 初始化</p>
<p>函数原型：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">cir_tx_status_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hal_cir_tx_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">sunxi_cir_tx_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cir_tx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数：</p>
<ul>
<li><code>cir_tx</code> ：操作结构体</li>
</ul>
<p>返回值：</p>
<ul>
<li><code>0</code>：成功初始化</li>
<li>负数：初始化失败</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="irtx-设置载波占空比">IRTX 设置载波占空比<a class="hash-link" aria-label="Direct link to IRTX 设置载波占空比" title="Direct link to IRTX 设置载波占空比" href="/en-US/linux-manual/amp-docs/hal/ir#irtx-设置载波占空比">​</a></h4>
<p>配置 IRTX 模块占空比</p>
<p>函数原型：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hal_cir_tx_set_duty_cycle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> duty_cycle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数：</p>
<ul>
<li><code>duty_cycle</code>：占空比大小</li>
</ul>
<p>返回值：</p>
<ul>
<li>无</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="irtx-设置载波频率">IRTX 设置载波频率<a class="hash-link" aria-label="Direct link to IRTX 设置载波频率" title="Direct link to IRTX 设置载波频率" href="/en-US/linux-manual/amp-docs/hal/ir#irtx-设置载波频率">​</a></h4>
<p>设置载波频率</p>
<p>函数原型：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hal_cir_tx_set_carrier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> carrier_freq</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数：</p>
<ul>
<li><code>carrier_freq</code>：载波频率大小</li>
</ul>
<p>返回值：</p>
<ul>
<li>无</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="irtx-使能发送">IRTX 使能发送<a class="hash-link" aria-label="Direct link to IRTX 使能发送" title="Direct link to IRTX 使能发送" href="/en-US/linux-manual/amp-docs/hal/ir#irtx-使能发送">​</a></h4>
<p>发送IRTX 数据</p>
<p>函数原型：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hal_cir_tx_xmit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">txbuf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数：</p>
<ul>
<li><code>txbuf</code>： 代表数据 <code>buf</code></li>
<li><code>count</code>： 代表数据长度</li>
</ul>
<p>返回值：</p>
<ul>
<li>无</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块使用范例">模块使用范例<a class="hash-link" aria-label="Direct link to 模块使用范例" title="Direct link to 模块使用范例" href="/en-US/linux-manual/amp-docs/hal/ir#模块使用范例">​</a></h3>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdint.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;string.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;unistd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;hal_cmd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;sunxi_hal_cir_tx.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">NS_TO_US</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">nsec</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">nsec</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">/</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">1000</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_NBITS</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_UNIT</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">562500</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property comment" style="color:#999988;font-style:italic">/* ns. Logic data bit pulse length */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_HEADER_PULSE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">  </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression number" style="color:#36acaa">16</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">*</span><span class="token macro property expression" style="color:#36acaa"> NEC_UNIT</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property comment" style="color:#999988;font-style:italic">/* 9ms. 16 * Logic data bit pulse length*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_HEADER_SPACE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression number" style="color:#36acaa">8</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">*</span><span class="token macro property expression" style="color:#36acaa"> NEC_UNIT</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property comment" style="color:#999988;font-style:italic">/* 4.5ms */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_BIT_PULSE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">*</span><span class="token macro property expression" style="color:#36acaa"> NEC_UNIT</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_BIT_0_SPACE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">*</span><span class="token macro property expression" style="color:#36acaa"> NEC_UNIT</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_BIT_1_SPACE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression number" style="color:#36acaa">3</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">*</span><span class="token macro property expression" style="color:#36acaa"> NEC_UNIT</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_TRAILER_PULSE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">*</span><span class="token macro property expression" style="color:#36acaa"> NEC_UNIT</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">NEC_TRAILER_SPACE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression number" style="color:#36acaa">10</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">*</span><span class="token macro property expression" style="color:#36acaa"> NEC_UNIT</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property comment" style="color:#999988;font-style:italic">/* even longer */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">GPIO_IR_RAW_BUF_SIZE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">DEFAULT_DUTY_CYCLE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">33</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">DEFAULT_CARRIER_FREQ</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">38000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">LIRC_MODE2_PULSE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">0x01000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">LIRC_MODE2_SPACE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">0x00000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">LIRC_VALUE_MASK</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">0x00FFFFFF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">LIRC_MODE2_MASK</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">0xFF000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">LIRC_PULSE</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">val</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">val</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression operator" style="color:#393A34">&amp;</span><span class="token macro property expression" style="color:#36acaa">LIRC_VALUE_MASK</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">|</span><span class="token macro property expression" style="color:#36acaa"> LIRC_MODE2_PULSE</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">LIRC_SPACE</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">val</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">val</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression operator" style="color:#393A34">&amp;</span><span class="token macro property expression" style="color:#36acaa">LIRC_VALUE_MASK</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression operator" style="color:#393A34">|</span><span class="token macro property expression" style="color:#36acaa"> LIRC_MODE2_SPACE</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">uint32_t</span><span class="token plain"> tx_raw_buf</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">GPIO_IR_RAW_BUF_SIZE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nec_modulation_byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uint32_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint8_t</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">uint8_t</span><span class="token plain"> mask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x01</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mask</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">code </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> mask</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">/* bit 1 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LIRC_PULSE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NS_TO_US</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_BIT_PULSE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LIRC_SPACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NS_TO_US</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_BIT_1_SPACE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">/* bit 0 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LIRC_PULSE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NS_TO_US</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_BIT_PULSE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LIRC_SPACE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NS_TO_US</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_BIT_0_SPACE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mask </span><span class="token operator" style="color:#393A34">&lt;&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ir_lirc_transmit_ir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uint32_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">raw_buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">size_t</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">count </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nec_ir_encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uint32_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">raw_buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint32_t</span><span class="token plain"> key_code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">uint8_t</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reverse_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reverse_command</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">uint32_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">head_p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">data_p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">stop_p</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key_code </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xff</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  reverse_address </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key_code </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xff</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  command </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key_code </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xff</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  reverse_command </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key_code </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xff</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* head bit */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  head_p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> raw_buf</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">head_p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LIRC_PULSE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NS_TO_US</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_HEADER_PULSE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">head_p </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LIRC_PULSE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NS_TO_US</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_HEADER_SPACE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* data bit */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data_p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> raw_buf </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">nec_modulation_byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data_p </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">nec_modulation_byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reverse_address</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data_p </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">nec_modulation_byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data_p </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">nec_modulation_byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reverse_command</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* stop bit */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  stop_p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data_p </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop_p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LIRC_PULSE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NS_TO_US</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_TRAILER_PULSE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop_p </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">LIRC_PULSE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NS_TO_US</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_TRAILER_SPACE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NEC_NBITS </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cmd_test_cir_tx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> argc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> key_code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x04fb13ec</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">67</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token class-name">sunxi_cir_tx_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cir_tx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">hal_cir_tx_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cir_tx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">hal_cir_tx_set_duty_cycle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DEFAULT_DUTY_CYCLE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">hal_cir_tx_set_carrier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DEFAULT_CARRIER_FREQ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nec_ir_encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_raw_buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key_code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%d &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_raw_buf </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00FFFFFF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tx_raw_buf</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_raw_buf</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00FFFFFF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">hal_cir_tx_xmit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx_raw_buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;end test!\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ir-rx-接收cir">IR RX 接收（CIR）<a class="hash-link" aria-label="Direct link to IR RX 接收（CIR）" title="Direct link to IR RX 接收（CIR）" href="/en-US/linux-manual/amp-docs/hal/ir#ir-rx-接收cir">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块配置介绍-1">模块配置介绍<a class="hash-link" aria-label="Direct link to 模块配置介绍" title="Direct link to 模块配置介绍" href="/en-US/linux-manual/amp-docs/hal/ir#模块配置介绍-1">​</a></h3>
<p>IR 在 <code>menuconfig </code> 中配置如下</p>
<p><img decoding="async" loading="lazy" alt="image-20230315182726395" src="/en-US/assets/images/image-20230315182726395-7463bdf3305e20493001224739ebbb78.png" width="767" height="452" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块源码结构-1">模块源码结构<a class="hash-link" aria-label="Direct link to 模块源码结构" title="Direct link to 模块源码结构" href="/en-US/linux-manual/amp-docs/hal/ir#模块源码结构-1">​</a></h3>
<p>CIR 模块源码结构如下所示：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rtos-hal/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|--hal/source/cir/hal_cir.c     // hal层接口代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|--include/hal/sunxi_hal_cir.h  // 头文件</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块返回值定义">模块返回值定义<a class="hash-link" aria-label="Direct link to 模块返回值定义" title="Direct link to 模块返回值定义" href="/en-US/linux-manual/amp-docs/hal/ir#模块返回值定义">​</a></h3>
<table><thead><tr><th>返回值</th><th>枚举</th><th>定义</th></tr></thead><tbody><tr><td>-4</td><td><code>CIR_PIN_ERR</code></td><td>配置的 CIR 引脚错误</td></tr><tr><td>-3</td><td><code>CIR_CLK_ERR</code></td><td>配置的 CIR 模块时钟错误</td></tr><tr><td>-2</td><td><code>CIR_IRQ_ERR</code></td><td>中断配置错误</td></tr><tr><td>-1</td><td><code>CIR_PORT_ERR</code></td><td>配置 CIR 端口错误</td></tr><tr><td>0</td><td><code>CIR_OK</code></td><td>成功</td></tr></tbody></table>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   CIR_PIN_ERR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   CIR_CLK_ERR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   CIR_IRQ_ERR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   CIR_PORT_ERR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   CIR_OK </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token class-name">cir_status_t</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块接口说明-1">模块接口说明<a class="hash-link" aria-label="Direct link to 模块接口说明" title="Direct link to 模块接口说明" href="/en-US/linux-manual/amp-docs/hal/ir#模块接口说明-1">​</a></h3>
<p>头文件</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;sunxi_hal_cir.h&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ir-初始化接口">IR 初始化接口<a class="hash-link" aria-label="Direct link to IR 初始化接口" title="Direct link to IR 初始化接口" href="/en-US/linux-manual/amp-docs/hal/ir#ir-初始化接口">​</a></h4>
<p>IR 模块初始化，主要初始化采样率、通道选择及注册中断等</p>
<p>函数原型：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">cir_status_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sunxi_cir_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">cir_port_t</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数：</p>
<ul>
<li><code>port</code> ：CIR 通道</li>
</ul>
<p>返回值：</p>
<ul>
<li><code>0</code>：成功初始化</li>
<li>负数：初始化失败</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ir-注册回调接口">IR 注册回调接口<a class="hash-link" aria-label="Direct link to IR 注册回调接口" title="Direct link to IR 注册回调接口" href="/en-US/linux-manual/amp-docs/hal/ir#ir-注册回调接口">​</a></h4>
<p>向应用层提供注册回调接口的功能</p>
<p>函数原型：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sunxi_cir_callback_register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">cir_port_t</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">cir_callback_t</span><span class="token plain"> callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数：</p>
<ul>
<li><code>port</code> ：CIR 通道</li>
<li><code>callback</code>：应用层回调接口</li>
</ul>
<p>返回值：</p>
<ul>
<li>无</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ir-去初始化接口">IR 去初始化接口<a class="hash-link" aria-label="Direct link to IR 去初始化接口" title="Direct link to IR 去初始化接口" href="/en-US/linux-manual/amp-docs/hal/ir#ir-去初始化接口">​</a></h4>
<p>函数原型：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sunxi_cir_deinit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">cir_port_t</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数：</p>
<ul>
<li><code>port</code> ：CIR 通道</li>
</ul>
<p>返回值：</p>
<ul>
<li>无</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="模块使用范例-1">模块使用范例<a class="hash-link" aria-label="Direct link to 模块使用范例" title="Direct link to 模块使用范例" href="/en-US/linux-manual/amp-docs/hal/ir#模块使用范例-1">​</a></h3>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdint.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;string.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;unistd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;hal_cmd.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;hal_log.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;sunxi_hal_cir.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">cir_callback_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cir_irq_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">uint32_t</span><span class="token plain"> data_type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint32_t</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;reg_val:0x%u\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cmd_test_cir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> argc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">cir_port_t</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> timeout_sec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TickType_t start_ticks</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current_ticks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Run ir test\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">argc </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">hal_log_err</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;usage: hal_ir channel\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strtol</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sunxi_cir_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">hal_log_err</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;cir init failed!\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">sunxi_cir_callback_register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cir_irq_callback</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start_ticks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">xTaskGetTickCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;start_ticks: %u\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> start_ticks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    current_ticks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">xTaskGetTickCount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">current_ticks </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> start_ticks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> portTICK_PERIOD_MS </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        timeout_sec </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;current_ticks: %u\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> current_ticks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">sunxi_cir_deinit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="File Tab"><a class="pagination-nav__link pagination-nav__link--prev" href="/en-US/linux-manual/amp-docs/hal/gpio"><div class="pagination-nav__sublabel">Previous page</div><div class="pagination-nav__label">GPIO - 通用IO</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en-US/linux-manual/amp-docs/hal/ledc"><div class="pagination-nav__sublabel">Next page</div><div class="pagination-nav__label">LEDC - RGB LED</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#ir-tx-发送-cir_tx">IR TX 发送 （CIR_TX）</a><ul><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块内部调制原理">模块内部调制原理</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#载波频率设置">载波频率设置</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#数据发送流程">数据发送流程</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#设置载波占空比">设置载波占空比</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#设置载波频率">设置载波频率</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块配置介绍">模块配置介绍</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块源码结构">模块源码结构</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块接口说明">模块接口说明</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块使用范例">模块使用范例</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#ir-rx-接收cir">IR RX 接收（CIR）</a><ul><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块配置介绍-1">模块配置介绍</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块源码结构-1">模块源码结构</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块返回值定义">模块返回值定义</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块接口说明-1">模块接口说明</a></li><li><a class="table-of-contents__link toc-highlight" href="/en-US/linux-manual/amp-docs/hal/ir#模块使用范例-1">模块使用范例</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ©️ Avaota SBC Team. 2024. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>